<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="assets/css/googleMaps.css">
    <link rel="stylesheet" type="text/css" href="assets/css/main.css">
    <title>Test</title>
</head>
<body>
    <div class="container">
        <div class="row">
            <div class="col-xs-12">
                <h1><span id="cityDisplay">City</span> at a Glance</h1>
            </div>
        </div>
        <div class="row searchRow">
            <div class="col-xs-12">
                <form id="citySearch">
                    <input id="pac-input" class="controls" type="text" placeholder="Enter Your City">
                </form>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-8">
                <img src="http://cdn-image.travelandleisure.com/sites/default/files/styles/1600x1000/public/1444253482/DG2015-new-york.jpg" alt="nyc">
            </div>
            <div class="col-xs-4">
                <h2>Weather</h2>
                <div id="iconContainer">
                    <img id="icon" src="">
                </div>
                <ul>
                    <li>Conditions: <span id="condDisplay"></span></li>
                    <li>Temperature: <span id="tempDisplay"></span></li>
<!--                    <li>Temperature: <span id="tempDisplay"></span></li>-->
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-6">
                <h2>Traffic</h2>
                <div id="map"></div>
            </div>
            <div class="col-xs-6">
                <h2>Events</h2>
            </div>
        </div>
    </div>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDIufmm5UiONljRO32RW3ox_K01E0zgKPE&libraries=places&callback=initAutocomplete" async defer></script>
<script src="assets/js/googleMaps.js"></script>
<script>
    $("#citySearch").submit(function() {
        event.preventDefault();
        var city = $("#pac-input").val().trim();
        $.ajax({
            url: "https://api.openweathermap.org/data/2.5/weather?q=" + city + "&units=imperial&appid=166a433c57516f51dfab1f7edaed8413",
            method: "GET"
        }).then(function(response) {
            console.log(response);
            $("#cityDisplay").text(titleCase(city));
            $("#icon").attr("src", "http://openweathermap.org/img/w/" + response.weather[0].icon + ".png");
            $("#tempDisplay").text(response.main.temp);
            $("#condDisplay").text(response.weather[0].main);
        });
    });
    
    function titleCase(str) {
      return str.toLowerCase().split(' ').map(x=>x[0].toUpperCase()+x.slice(1)).join(' ');
    }
</script>
</body>
</html>